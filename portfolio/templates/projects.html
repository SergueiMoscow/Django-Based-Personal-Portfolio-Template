{% extends 'base.html' %}
{% load static %}
{% block title %}
–í—Å–µ –ø—Ä–æ–µ–∫—Ç—ã | {{ portfolio.user_info.portfolio_name }}
{% endblock %}

{% block extra_head %}
<style>
  body {
    position: relative;
    background: transparent;
    overflow-x: hidden;
  }
  body::before {
    content: "";
    position: fixed;
    top: 0;
    left: 0;
    height: 100%;
    width: 100%;
    background: url("{% static 'portfolio/images/bg.jpg' %}") center center / cover no-repeat fixed;
    filter: blur(10px) brightness(0.4);
    z-index: -1;
  }
</style>
{% endblock %}

{% block content %}
  <!-- All GitHub Projects Section -->
  <section class="section scroll-fade" style="padding: 100px 20px;">
    <div class="container" style="max-width: 1200px; margin: auto;">

      <div style="text-align: right; margin-bottom: -30px;">
        <a href="{% url 'home' %}#projects" class="section-label text-link">‚Üê Back</a>
      </div>

      <h2 class="section-title center">üß† –í—Å–µ –ø—Ä–æ–µ–∫—Ç—ã</h2>
      <p class="section-description center">
        These are all public repositories fetched directly from GitHub.
      </p>

      <div class="card-container flip-container" style="justify-content: center;">
        {% for p in projects %}
        <div class="flip-card scroll-fade">
          <div class="flip-card-inner">

            <!-- Front -->
            <div class="flip-card-front glass-card">
              <h3>{{ p.title }}</h3>
              <p style="font-size: 0.95rem; color: #ccc;">
                {{ p.short|default:"No description available." }}
              </p>
            </div>

            <!-- Back -->
            <div class="flip-card-back" style="display: flex; flex-direction: column; align-items: center; justify-content: center;">
                {# without video #}
                {% comment %}
              <img 
                src="{% if p.image %}{{ p.image.url }}{% elif 'github.com' in p.link %}https://opengraph.githubassets.com/1/{{ p.link|cut:'https://github.com/' }}{% else %}{% static 'portfolio/images/projects/default.png' %}{% endif %}"
                alt="{{ p.title }}" 
                style="width: 100%; max-height: 180px; object-fit: cover; border-radius: 12px; margin-bottom: 14px; box-shadow: 0 0 10px rgba(0,0,0,0.3);">
                {% endcomment %}
                {# end without video #}
                {# with video #}
                {% include "div_video.html" with item=p %}
                {# end with video #}
              <div style="display: flex; justify-content: center;">
                <a href="{% url 'project_detail' project_id=p.id %}" target="_blank" class="text-link glow-link">üîó –ü–æ–¥—Ä–æ–±–Ω–µ–µ</a>
              </div>
            </div>

          </div>
        </div>
        {% endfor %}
      </div>

    </div>
  </section>
{% endblock %}
