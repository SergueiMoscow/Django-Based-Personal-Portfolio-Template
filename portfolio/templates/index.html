{% extends 'base.html' %}
{% load static %}
{% block extra_head %}
  <script>
    window.portfolioRoles = {{ portfolio.user_info.roles|safe }};
  </script>
{% endblock %}

{% block content %}
  <!-- Hero -->
<header id="hero" class="hero centered section scroll-fade"
  style="background: linear-gradient(rgba(13, 13, 13, 0.9), rgba(13, 13, 13, 0.9)),
         url('{% static 'portfolio/images/background_1.jpg' %}') center/cover no-repeat;">

  <img src="{{ portfolio.images.avatar_url }}" alt="{{ portfolio.user_info.portfolio_name }} Avatar" class="avatar-hero hero-avatar" />
  <!-- img src="{% static 'portfolio/images/avatar.jpg' %}" alt="Profile Image" class="avatar-hero hero-avatar" / -->

  <h1 class="title">Привет, я {{ portfolio.user_info.portfolio_name }} 👋</h1>
  <h3 class="subtitle"><span id="typing"></span></h3>

  <p class="subtitle">
    {{ portfolio.user_info.portfolio_subtitle }}
  </p>

  <div class="scroll-down">☟</div>
</header>


  <hr class="section-divider" />

 <!-- About -->
<section id="about" class="section scroll-fade parallax-about">
  <div class="section-header center">
    <h2 class="section-title"><span class="emoji">🧠</span>{{ portfolio.about_me.title}}</h2>
  </div>

  <div class="about-flex responsive-stack">
    <!-- Animated 3D Avatar Frame -->
    <div class="about-avatar-container scroll-fade">
      <div class="avatar-frame-glow">
        <!-- img src="{% static 'portfolio/images/avatar.jpg' %}" alt="your name Avatar" class="avatar-full" / -->
        <img src="{{ portfolio.images.avatar_url }}" alt="your name Avatar" class="avatar-full" />
      </div>
    </div>

    <!-- Glass Info Card -->
    <div class="about-glass-card glass-card scroll-fade">
      <p class="about-line">
<!--        I'm a <span class="glow-text">ABC</span> passionate about building <span class="highlight">secure web apps</span> and exploring <span class="highlight">new tech</span>. -->
          {{ portfolio.about_me.phrase_1 | safe }}
      </p>
      <p class="about-line">
<!--        I've built tools like <span class="glow-text">Project Name 1</span> and <span class="glow-text">Project Name 2</span>. -->
          {{ portfolio.about_me.phrase_2 | safe }}
      </p>
      <p class="about-line">
        <strong>Tech Stack:</strong> <span class="highlight">Python</span>, <span class="highlight">Django Basics</span>, <span class="highlight">HTML</span>, <span class="highlight">CSS</span>.
      </p>

      <!-- Contact + Resume Links -->
      <div class="about-links scroll-fade">
        <a href="mailto:{{ portfolio.social_links.portfolio_email }}" class="text-link glow-link" target="_blank">📧 Email</a>
        <a href="https://github.com/{{ portfolio.social_links.portfolio_github_user }}" class="text-link glow-link" target="_blank">🌐 GitHub</a>
        <a href="{{ portfolio.social_links.portfolio_linkedin }}" class="text-link glow-link" target="_blank">💼 LinkedIn</a>
        <a href="{% static portfolio.user_info.resume_pdf %}" class="text-link glow-link" target="_blank">📄 Resume</a>

      </div>
    </div>
  </div>
</section>

  <hr class="section-divider" />

<!-- Projects -->
<section id="projects" class="section scroll-fade">
  <div class="section-header">
    <h2 class="section-title">⚙️ Featured Projects</h2>
    <p class="section-label top-right">
      <a href="{% url 'projects' %}" class="btn-icon-link">📂 View All</a>
    </p>
  </div>

  <p class="section-description">
    From secure systems to scalable apps — these featured projects reflect my passion for full-stack development and cybersecurity innovation.
  </p>

  <!-- Project Flip Cards -->
  <div class="card-container flip-container" style="justify-content: center; gap: 20px; flex-wrap: wrap;">
    {% for p in projects %}
    <div class="flip-card scroll-fade" role="group" aria-label="{{ p.title }}">
      <div class="flip-card-inner">

        <!-- Front -->
        <div class="flip-card-front glass-card">
          <h3 class="project-title">{{ p.title }}</h3>
          <p class="card-description">
            {{ p.short|default:"No description available." }}
          </p>
        </div>

        <!-- Back -->
        <div class="flip-card-back" style="display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 15px;">
          <img
            src="{% if p.image %}{{ p.image.url }}{% elif 'github.com' in p.link %}https://opengraph.githubassets.com/1/{{ p.link|cut:'https://github.com/' }}{% else %}{% static 'portfolio/images/projects/default.png' %}{% endif %}"
            alt="{{ p.title }} Thumbnail"
            class="project-thumbnail"
            style="width: 100%; max-height: 180px; object-fit: cover; border-radius: 10px; margin-bottom: 12px; box-shadow: 0 0 12px rgba(0,0,0,0.3);"
          >

          <div style="display: flex; flex-direction: column; gap: 6px;">
            <a href="{% url 'project_detail' project_id=p.id %}" target="_blank" rel="noopener" class="text-link glow-link">📄 Подробнее</a>
          </div>
        </div>

      </div>
    </div>
    {% endfor %}
  </div>
</section>

  <hr class="section-divider" />

<!-- Certificates -->
<section id="certificates" class="section scroll-fade">
  <div class="section-header">
    <h2 class="section-title">📜 Certificates</h2>
    <p class="section-label top-right">
      <a href="{% url 'certificates' %}" class="btn-icon-link">📑 View All</a>
    </p>
  </div>
  <p class="section-description">
    Verified credentials from trusted platforms showcasing technical depth.
  </p>

  <div class="flip-container certificate-grid">
    {% for cert in certificates|slice:":6" %}
    <div class="flip-card scroll-fade" data-name="{{ cert.name }}" data-year="{{ cert.year }}" data-issuer="{{ cert.issuer }}">
      <div class="flip-card-inner">
        <div class="flip-card-front">
          <h3>{{ cert.name }}</h3>
          <p>{{ cert.issuer }} ({{ cert.year }})</p>
        </div>
        <div class="flip-card-back">
          {% if cert.image %}
          <img src="{% static 'portfolio/images/certificates/' %}{{ cert.image }}"
               alt="{{ cert.name }}"
               class="preview-image"
               style="max-width: 100%; max-height: 180px; border-radius: 8px; box-shadow: 0 0 10px #fde4c388; cursor: zoom-in;">
          {% else %}
          <p>{{ cert.description }}</p>
          <a href="{{ cert.link }}" target="_blank" class="text-link">🔗 View Certificate</a>
          {% endif %}
        </div>
      </div>
    </div>
    {% endfor %}
  </div>
</section>

{% include 'modal.html' %}
<hr class="section-divider" />

  <!-- Volunteer -->
<section id="volunteer" class="section scroll-fade">
  <h2 class="section-title">🤝 Volunteer Work</h2>
  <p class="section-description">
    Leadership and event execution experience through college societies and technical clubs.
  </p>

  <div id="volunteer-container" class="card-container flip-container" style="justify-content: center;">
    {% for v in volunteers %}
    <div class="flip-card scroll-fade" data-role="{{ v.role }}" data-org="{{ v.org }}" data-date="{{ v.date }}">
      <div class="flip-card-inner">

        <!-- Front -->
        <div class="flip-card-front">
          <h3>{{ v.role }}</h3>
          <p><strong>{{ v.org }}</strong></p>
          <p>{{ v.date }}</p>
          <p class="small-text" style="margin-top: 10px;">{{ v.details }}</p>
        </div>

        <!-- Back -->
        <div class="flip-card-back" style="display: flex; flex-direction: column; align-items: center; justify-content: center;">
          {% if v.image %}
          <img src="{% static 'portfolio/images/volunteer/' %}{{ v.image }}"
               alt="{{ v.role }}"
               class="preview-image"
               style="max-width: 100%; max-height: 220px; border-radius: 10px; box-shadow: 0 0 12px #fde4c388; cursor: zoom-in;">
          {% else %}
          <p>Thanks for viewing!</p>
          {% endif %}
        </div>

      </div>
    </div>
    {% endfor %}
  </div>
</section>

  <hr class="section-divider" />

<!-- Contact -->
<section id="contact" class="section scroll-fade">
  <div class="section-header center">
    <h2 class="section-title">✉️ Contact</h2>
    <p class="section-description">
      I’m open to <span class="highlight">freelance work</span>, <span class="highlight">collaborations</span>, or just a good tech chat. Let’s connect!
    </p>
  </div>

  <div class="contact-buttons-container center">
    <a href="{{ portfolio.social_links.portfolio_email }}" target="_blank" class="glass-button">
      📧 Email Me
    </a>
    <a href="{{ portfolio.social_links.portfolio_linkedin }}" target="_blank" class="glass-button">
      💼 LinkedIn
    </a>
    <a href="https://github.com/{{ portfolio.social_links.github_user_name }}" target="_blank" class="glass-button">
      🌐 GitHub
    </a>
  </div>
</section>

{% endblock %}